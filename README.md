# gin-scheduler-json

> ğŸ§­ **A lightweight JSON-based task scheduler built with Go + Gin.**  
> ä¸€æ¬¾åŸºäº **Go + Gin** çš„è½»é‡çº§ä»»åŠ¡è°ƒåº¦å·¥å…·ï¼Œé€šè¿‡ **JSON æ–‡ä»¶æŒä¹…åŒ–ä»»åŠ¡**ï¼Œæ”¯æŒå‘¨æœŸæ€§æ‰§è¡Œã€æš‚åœã€åˆ é™¤ç­‰æ“ä½œã€‚

---

## ğŸš€ åŠŸèƒ½æ¦‚è¿°

`gin-scheduler-json` æ˜¯ä¸€ä¸ªç®€å•æ˜“ç”¨çš„ **å®šæ—¶ä»»åŠ¡è°ƒåº¦æœåŠ¡**ï¼Œä¸»è¦ç”¨äºå‘¨æœŸæ€§åœ°å‘æŒ‡å®š API å‘é€è¯·æ±‚ï¼ˆGET æˆ– POSTï¼‰ã€‚  
æ‰€æœ‰ä»»åŠ¡éƒ½å­˜å‚¨åœ¨æœ¬åœ° `config.json` æ–‡ä»¶ä¸­ï¼Œæ— éœ€æ•°æ®åº“ï¼Œ**å•æ–‡ä»¶å³å¯è¿è¡Œ**ã€‚

**ä¸»è¦ç‰¹æ€§ï¼š**
- ğŸ§© **è½»é‡ç‹¬ç«‹**ï¼šä»…ä¸€ä¸ªå¯æ‰§è¡Œæ–‡ä»¶ + ä¸€ä¸ª JSON é…ç½®æ–‡ä»¶  
- ğŸ” **å¾ªç¯ä»»åŠ¡**ï¼šæŒ‰ç§’å‘¨æœŸæ€§æ‰§è¡Œ HTTP è¯·æ±‚  
- ğŸ’¾ **è‡ªåŠ¨æŒä¹…åŒ–**ï¼šä»»åŠ¡ä¿¡æ¯ä¿å­˜åœ¨ `config.json` ä¸­  
- â™»ï¸ **è‡ªåŠ¨æ¢å¤**ï¼šé‡å¯åè‡ªåŠ¨æ¢å¤å·²å¯ç”¨ä»»åŠ¡  
- âš™ï¸ **é…ç½®ç«¯å£**ï¼šæœåŠ¡ç«¯å£å¯åœ¨ `config.json` ä¸­ä¿®æ”¹ï¼ˆé»˜è®¤ `9000`ï¼‰  
- ğŸ”’ **é›¶ä¾èµ–éƒ¨ç½²**ï¼šæ— éœ€ä»»ä½•å¤–éƒ¨æœåŠ¡æˆ–æ•°æ®åº“  

---

## ğŸ“¦ å¿«é€Ÿå¼€å§‹

```bash
# ç¼–è¯‘
go build -trimpath -ldflags "-s -w" -o scheduler

# è¿è¡Œï¼ˆå½“å‰ç›®å½•ä¼šè‡ªåŠ¨ç”Ÿæˆ config.jsonï¼‰
./scheduler
```

é¦–æ¬¡è¿è¡Œè‡ªåŠ¨ç”Ÿæˆï¼š
```json
{
  "version": 1,
  "port": 9000,
  "tasks": []
}
```

---

## ğŸŒ API ç®€ä»‹

> é™¤æŸ¥è¯¢æ¥å£ï¼ˆGETï¼‰å¤–ï¼Œå…¶ä½™æ“ä½œå‡ä¸º **POST + URL**ã€‚  
> ä»… `POST /tasks/add` éœ€è¦è¯·æ±‚ä½“ã€‚

### âœ… å¥åº·æ£€æŸ¥
- `GET /healthz`  
- `POST /healthz`

è¿”å›ï¼š
```json
{"ok": true}
```

---

### â• æ·»åŠ ä»»åŠ¡
- `POST /tasks/add`
```json
{
  "interval_seconds": 5,
  "url": "https://example.com/api",
  "method": "GET",
  "description": "æ¯5ç§’è¯·æ±‚ä¸€æ¬¡API"
}
```
è¿”å›ï¼š
```json
{"id": "t-20251026T104512..."}
```

---

### ğŸ“‹ æŸ¥è¯¢å…¨éƒ¨ä»»åŠ¡
- `GET /tasks`

### ğŸ” æŸ¥è¯¢å•ä¸ªä»»åŠ¡
- `GET /tasks/{id}`

---

### â¸ï¸ æš‚åœä»»åŠ¡
- `POST /tasks/{id}/pause`

### âŒ åˆ é™¤ä»»åŠ¡
- `POST /tasks/{id}/delete`

---

## ğŸ§ª ç¤ºä¾‹

```bash
# æ·»åŠ ä»»åŠ¡
curl -X POST http://127.0.0.1:9000/tasks/add   -H "Content-Type: application/json"   -d '{"interval_seconds":5,"url":"https://httpbin.org/get","method":"GET","description":"æ¢æ´»"}'

# æŸ¥è¯¢å…¨éƒ¨ä»»åŠ¡
curl http://127.0.0.1:9000/tasks

# æš‚åœä»»åŠ¡
curl -X POST http://127.0.0.1:9000/tasks/<id>/pause

# åˆ é™¤ä»»åŠ¡
curl -X POST http://127.0.0.1:9000/tasks/<id>/delete
```

---

## ğŸ§° åº”ç”¨åœºæ™¯
- å®šæ—¶æ¢æ´» / Ping å¤–éƒ¨æœåŠ¡  
- ç®€å• HTTP API è°ƒåº¦  
- å‘¨æœŸæ€§åŒæ­¥æˆ–è§¦å‘ä»»åŠ¡  
- å¿«é€ŸéªŒè¯å®šæ—¶ä»»åŠ¡é€»è¾‘ï¼ˆæ— éœ€éƒ¨ç½²å¤æ‚ cronï¼‰  

---

## ğŸ“ License
MIT
